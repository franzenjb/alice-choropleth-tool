<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quick Map</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  </head>
  <body>
    <main>
      <header>
        <h1>Quick Map</h1>
        <p class="tagline">CSV + State + Area → Download GeoJSON. Boundaries are auto‑selected from your local cache.</p>
        <div id="engine" class="info"></div>
      </header>

      <section class="quick">
        <h2>1) Upload Your CSV</h2>
        <div id="dz" class="dropzone" role="button" aria-label="Drop CSV or click to browse">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v12m0-12l-4 4m4-4l4 4"/><rect x="3" y="14" width="18" height="7" rx="2" ry="2"/></svg>
          <div id="dzLabel">Drop CSV here or click to browse</div>
          <div class="mini">Accepts any CSV with geographic identifiers (ZIP, FIPS/GEOIDs, etc.)</div>
          <input type="file" id="csv" accept="text/csv,.csv" style="display:none;" />
        </div>

        <h2 style="margin-top:16px;">2) Configure</h2>
        <div class="controls">
          <label>State
            <select id="state"></select>
          </label>
          <label>Area
            <select id="level">
              <option value="county">County</option>
              <option value="subcounty">County‑Subdivision</option>
              <option value="place">Place (City/Town)</option>
              <option value="zcta">ZIP Code Areas</option>
              <option value="tract">Census Tract</option>
              <option value="state">State</option>
            </select>
          </label>
        </div>

        <div class="controls" style="margin-top:8px; align-items:center;">
          <label style="grid-column: span 2; display:flex; align-items:center; gap:8px;">
            <input type="checkbox" id="simplifyChk" /> Simplify geometry (smaller, faster)
            <select id="simplifyTol" style="max-width:180px;">
              <option value="0.0005">0.0005 (recommended)</option>
              <option value="0.001">0.001</option>
              <option value="0.0002">0.0002</option>
              <option value="0">No simplify</option>
            </select>
          </label>
        </div>

        <div class="actions">
          <button id="go">Create My Map</button>
        </div>
        <div id="msg" class="info" style="margin-top:10px;"></div>
        <div id="after" style="margin-top:12px; display:none;">
          <button id="download">Download GeoJSON</button>
        </div>
      </section>

      <section class="quick" style="margin-top:16px;">
        <h2>3) Preview</h2>
        <div class="mini">A quick look at your map. Styling uses Below_ALICE_Rate when available.</div>
        <div class="actions">
          <button id="previewBtn" disabled>Preview Map</button>
        </div>
        <div id="previewNote" class="info"></div>
        <div id="map" class="map" style="height:420px; margin-top:10px; display:none;"></div>
      </section>
    </main>
    <script src="quick.js"></script>
  </body>
  </html>
