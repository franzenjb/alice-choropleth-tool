<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ALICE Map Maker (Volunteer Mode)</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main>
      <header>
        <h1>ALICE Map Maker</h1>
        <p class="tagline">Make a simple choropleth map from your CSV — no signup, no credits.</p>
        <div id="engineStatus" class="info"></div>
      </header>

      <ol class="steps">
        <li id="step1" class="step active">
          <h2>1) Add your CSV</h2>
          <p class="hint">Drag and drop your ALICE CSV here, or pick a file.</p>
          <input type="file" id="csvFile" accept="text/csv,.csv" />
          <div id="csvInfo" class="info"></div>
          <button class="next" id="toStep2" disabled>Continue</button>
        </li>

        <li id="step2" class="step">
          <h2>2) Pick your State</h2>
          <p class="hint">We’ll suggest one if we can detect it from the CSV.</p>
          <select id="stateSelect"></select>
          <div id="stateInfo" class="info"></div>
          <div class="nav">
            <button class="back" data-back="1">Back</button>
            <button class="next" id="toStep3">Continue</button>
          </div>
        </li>

        <li id="step3" class="step">
          <h2>3) What area do you want to map?</h2>
          <div class="cards" id="levelCards">
            <button class="card" data-level="place">
              <strong>City / Town</strong>
              <span>“Place” (cities/towns) — use when your CSV is at the city level.</span>
            </button>
            <button class="card" data-level="subcounty">
              <strong>County‑Subdivision</strong>
              <span>Minor civil divisions or CCDs — common for county‑level planning.</span>
            </button>
            <button class="card" data-level="zcta">
              <strong>ZIP Code Areas</strong>
              <span>ZIP‑like areas (ZCTAs). Some ZIPs don’t match; we’ll show you how to fix.</span>
            </button>
          </div>
          <div class="nav">
            <button class="back" data-back="2">Back</button>
            <button class="next" id="toStep4" disabled>Continue</button>
          </div>
        </li>

        <li id="step4" class="step">
          <h2>4) Boundaries</h2>
          <p class="hint">Use a provided boundary (or upload one). If the Local Engine is connected, the boundary is auto‑selected.</p>
          <div class="boundaries">
            <div>
              <label><input type="radio" name="bmode" value="provided" checked> Use provided boundary</label>
              <div id="providedList" class="list"></div>
            </div>
            <div>
              <label><input type="radio" name="bmode" value="upload"> Upload my own boundary</label>
              <input type="file" id="boundaryFile" accept="application/geo+json,application/json,.geojson" disabled />
            </div>
          </div>
          <div id="boundaryInfo" class="info"></div>
          <div class="nav">
            <button class="back" data-back="3">Back</button>
            <button class="next" id="toStep5" disabled>Create My Map</button>
          </div>
        </li>

        <li id="step5" class="step">
          <h2>5) Download and Use</h2>
          <div id="progress" class="info"></div>
          <button id="downloadBtn" disabled>Download GeoJSON</button>
          <p class="hint small">Next: upload to ArcGIS Online or Pro and color by “Below_ALICE_Rate”.</p>
          <div id="resultInfo" class="info"></div>
          <div class="nav">
            <button class="back" data-back="4">Back</button>
          </div>
        </li>
      </ol>
    </main>

    <script src="app.js"></script>
  </body>
  </html>
